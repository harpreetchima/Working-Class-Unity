---
url: "https://formbricks.com/docs/self-hosting/advanced/migration"
title: "Migration - Documentation - Formbricks"
---

[Skip to main content](https://formbricks.com/docs/self-hosting/advanced/migration#content-area)

[Documentation - Formbricks home page![light logo](https://mintcdn.com/formbricks/FxVXbfRFRc8kmKdj/images/logo-light.svg?fit=max&auto=format&n=FxVXbfRFRc8kmKdj&q=85&s=91d574602867e4341e348d0a6b7c1ca3)![dark logo](https://mintcdn.com/formbricks/FxVXbfRFRc8kmKdj/images/logo-dark.svg?fit=max&auto=format&n=FxVXbfRFRc8kmKdj&q=85&s=91aaa3449f8c84a52b32c02e207d48bf)](https://formbricks.com/docs)

Search...

Ctrl K

- [Support](https://github.com/formbricks/formbricks/discussions)
- [Go to app](https://app.formbricks.com/)
- [Go to app](https://app.formbricks.com/)

Search...

Navigation

Advanced

Migration

[Overview](https://formbricks.com/docs/overview/introduction) [XM & Surveys](https://formbricks.com/docs/xm-and-surveys/overview) [Self Hosting](https://formbricks.com/docs/self-hosting/overview) [Development](https://formbricks.com/docs/development/overview) [API v1 Reference](https://formbricks.com/docs/api-reference/rest-api) [API v2 Reference (Beta)](https://formbricks.com/docs/api-v2-reference/introduction)

##### Self Hosting

- [Self-Hosting](https://formbricks.com/docs/self-hosting/overview)

##### Setup

- [One-Click Setup](https://formbricks.com/docs/self-hosting/setup/one-click)
- [Docker Setup](https://formbricks.com/docs/self-hosting/setup/docker)
- [Monitoring](https://formbricks.com/docs/self-hosting/setup/monitoring)
- [Cluster Setup](https://formbricks.com/docs/self-hosting/setup/cluster-setup)
- [Kubernetes Deployment](https://formbricks.com/docs/self-hosting/setup/kubernetes)

##### Configuration

- [Custom SSL Certificate](https://formbricks.com/docs/self-hosting/configuration/custom-ssl)
- [Environment Variables](https://formbricks.com/docs/self-hosting/configuration/environment-variables)
- [SMTP Configuration](https://formbricks.com/docs/self-hosting/configuration/smtp)
- [File Uploads Configuration](https://formbricks.com/docs/self-hosting/configuration/file-uploads)
- [Domain Configuration](https://formbricks.com/docs/self-hosting/configuration/domain-configuration)
- [Custom Subpath](https://formbricks.com/docs/self-hosting/configuration/custom-subpath)
- Auth & SSO

- Integrations


##### Advanced

- [Migration](https://formbricks.com/docs/self-hosting/advanced/migration)
- [License](https://formbricks.com/docs/self-hosting/advanced/license)
- [License Activation](https://formbricks.com/docs/self-hosting/advanced/license-activation)
- Enterprise Features

- [Rate Limiting](https://formbricks.com/docs/self-hosting/advanced/rate-limiting)

On this page

- [v4.0](https://formbricks.com/docs/self-hosting/advanced/migration#v4-0)
- [What‚Äôs New in Formbricks 4.0](https://formbricks.com/docs/self-hosting/advanced/migration#what%E2%80%99s-new-in-formbricks-4-0)
- [What This Means for Your Self-Hosting Setup](https://formbricks.com/docs/self-hosting/advanced/migration#what-this-means-for-your-self-hosting-setup)
- [Why We Made These Changes](https://formbricks.com/docs/self-hosting/advanced/migration#why-we-made-these-changes)
- [Migration Steps for v4.0](https://formbricks.com/docs/self-hosting/advanced/migration#migration-steps-for-v4-0)
- [One-Click Setup](https://formbricks.com/docs/self-hosting/advanced/migration#one-click-setup)
- [Manual Setup](https://formbricks.com/docs/self-hosting/advanced/migration#manual-setup)
- [Redis](https://formbricks.com/docs/self-hosting/advanced/migration#redis)
- [S3-compatible storage](https://formbricks.com/docs/self-hosting/advanced/migration#s3-compatible-storage)
- [Upgrade Process](https://formbricks.com/docs/self-hosting/advanced/migration#upgrade-process)
- [v3.3](https://formbricks.com/docs/self-hosting/advanced/migration#v3-3)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate)
- [v3.2](https://formbricks.com/docs/self-hosting/advanced/migration#v3-2)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate-2)
- [v3.1](https://formbricks.com/docs/self-hosting/advanced/migration#v3-1)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate-3)
- [v3.0](https://formbricks.com/docs/self-hosting/advanced/migration#v3-0)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate-4)
- [v2.7](https://formbricks.com/docs/self-hosting/advanced/migration#v2-7)
- [Additional Updates](https://formbricks.com/docs/self-hosting/advanced/migration#additional-updates)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate-5)
- [v2.6](https://formbricks.com/docs/self-hosting/advanced/migration#v2-6)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate-6)
- [v2.5](https://formbricks.com/docs/self-hosting/advanced/migration#v2-5)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate-7)
- [v2.4](https://formbricks.com/docs/self-hosting/advanced/migration#v2-4)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate-8)
- [Additional Updates](https://formbricks.com/docs/self-hosting/advanced/migration#additional-updates-2)
- [v2.3](https://formbricks.com/docs/self-hosting/advanced/migration#v2-3)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate-9)
- [Additional Updates](https://formbricks.com/docs/self-hosting/advanced/migration#additional-updates-3)
- [v2.2](https://formbricks.com/docs/self-hosting/advanced/migration#v2-2)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate-10)
- [Changes in Environment Variables](https://formbricks.com/docs/self-hosting/advanced/migration#changes-in-environment-variables)
- [v2.1](https://formbricks.com/docs/self-hosting/advanced/migration#v2-1)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate-11)
- [Changes in Environment Variables](https://formbricks.com/docs/self-hosting/advanced/migration#changes-in-environment-variables-2)
- [v2.0](https://formbricks.com/docs/self-hosting/advanced/migration#v2-0)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate-12)
- [App Surveys with @formbricks/js](https://formbricks.com/docs/self-hosting/advanced/migration#app-surveys-with-@formbricks/js)
- [v1.6](https://formbricks.com/docs/self-hosting/advanced/migration#v1-6)
- [Steps to Migrate](https://formbricks.com/docs/self-hosting/advanced/migration#steps-to-migrate-13)
- [Restoring the database after a failed upgrade](https://formbricks.com/docs/self-hosting/advanced/migration#restoring-the-database-after-a-failed-upgrade)
- [App Surveys with @formbricks/js](https://formbricks.com/docs/self-hosting/advanced/migration#app-surveys-with-@formbricks/js-2)
- [Upgrade and pin the client package](https://formbricks.com/docs/self-hosting/advanced/migration#upgrade-and-pin-the-client-package)
- [Deprecated Environment Variables](https://formbricks.com/docs/self-hosting/advanced/migration#deprecated-environment-variables)
- [v1.2](https://formbricks.com/docs/self-hosting/advanced/migration#v1-2)
- [New Environment Variables](https://formbricks.com/docs/self-hosting/advanced/migration#new-environment-variables)
- [Deprecated / Removed Environment Variables](https://formbricks.com/docs/self-hosting/advanced/migration#deprecated-/-removed-environment-variables)
- [v1.1](https://formbricks.com/docs/self-hosting/advanced/migration#v1-1)
- [Renamed Environment Variables](https://formbricks.com/docs/self-hosting/advanced/migration#renamed-environment-variables)
- [Deprecated Environment Variables](https://formbricks.com/docs/self-hosting/advanced/migration#deprecated-environment-variables-2)
- [Helper Shell Script](https://formbricks.com/docs/self-hosting/advanced/migration#helper-shell-script)
- [Docker & Single Script Setup](https://formbricks.com/docs/self-hosting/advanced/migration#docker-&-single-script-setup)

Advanced

# Migration

Formbricks Self-hosted version migration

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v4-0)  v4.0

**Important: Migration Required**Formbricks 4 introduces additional requirements for self-hosting setups and makes a dedicated Redis cache as well as S3-compatible file storage mandatory.

Formbricks 4.0 is a **major milestone** that sets up the technical foundation for future iterations and feature improvements. This release focuses on modernizing core infrastructure components to improve reliability, scalability, and enable advanced features going forward.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#what%E2%80%99s-new-in-formbricks-4-0)  What‚Äôs New in Formbricks 4.0

**üöÄ New Enterprise Features:**

- **Quotas Management**: Advanced quota controls for enterprise users

**üèóÔ∏è Technical Foundation Improvements:**

- **Enhanced File Storage**: Improved file handling with better performance and reliability
- **Improved Caching**: New caching functionality improving speed, extensibility and reliability
- **Database Optimization**: Removal of unused database tables and fields for better performance
- **Future-Ready Architecture**: Standardized infrastructure components for upcoming features

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#what-this-means-for-your-self-hosting-setup)  What This Means for Your Self-Hosting Setup

These improvements in Formbricks 4.0 also make some infrastructure requirements mandatory going forward:

- **Redis** for caching
- **MinIO or S3-compatible storage** for file uploads

These services are already included in the updated one-click setup for self-hosters, but existing users need to upgrade their setup. More information on this below.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#why-we-made-these-changes)  Why We Made These Changes

We know this represents more moving parts in your infrastructure and might even introduce more complexity in hosting Formbricks, and we don‚Äôt take this decision lightly. As Formbricks grows into a comprehensive Survey and Experience Management platform, we‚Äôve reached a point where the simple, single-service approach was holding back our ability to deliver the reliable, feature-rich product our users demand and deserve.By moving to dedicated, professional-grade services for these critical functions, we‚Äôre building the foundation needed to deliver:

- **Enterprise-grade reliability** with proper redundancy and backup capabilities
- **Advanced features** that require sophisticated caching and file processing
- **Better performance** through optimized, dedicated services
- **Future scalability** to support larger deployments and more complex use cases without the need to maintain two different approaches

We believe this is the only path forward to build the comprehensive Survey and Experience Management software we‚Äôre aiming for.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#migration-steps-for-v4-0)  Migration Steps for v4.0

Additional migration steps are needed if you are using a self-hosted Formbricks setup that uses either local file storage (not S3-compatible file storage) or doesn‚Äôt already use a Redis cache.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#one-click-setup)  One-Click Setup

For users using our official one-click setup, we provide an automated migration using a migration script:

Copy

```
# Download the latest script
curl -fsSL -o migrate-to-v4.sh \
  https://raw.githubusercontent.com/formbricks/formbricks/stable/docker/migrate-to-v4.sh

# Make it executable
chmod +x migrate-to-v4.sh

# Launch the guided migration
./migrate-to-v4.sh
```

This script guides you through the steps for the infrastructure migration and does the following:

- Adds a Redis service to your setup and configures it
- Adds a MinIO service (open source S3-alternative) to your setup, configures it and migrates local files to it
- Pulls the latest Formbricks image and updates your instance

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#manual-setup)  Manual Setup

If you use a different setup to host your Formbricks instance, you need to make sure to make the necessary adjustments to run Formbricks 4.0.

#### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#redis)  Redis

Formbricks 4.0 requires a Redis instance to work properly. Please add a Redis instance to your Docker setup, your K8s infrastructure, or however you are hosting Formbricks at the moment. Formbricks works with the latest versions of Redis as well as Valkey.You need to configure the `REDIS_URL` environment variable and point it to your Redis instance.

#### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#s3-compatible-storage)  S3-compatible storage

To use file storage (e.g., file upload questions, image choice questions, custom survey backgrounds, etc.), you need to have S3-compatible file storage set up and connected to Formbricks.Formbricks supports multiple storage providers (among many other S3-compatible storages):

- AWS S3
- Digital Ocean Spaces
- Hetzner Object Storage
- Custom MinIO server

Please make sure to set up a storage bucket with one of these solutions and then link it to Formbricks using the following environment variables:

Copy

```
  S3_ACCESS_KEY: your-access-key
  S3_SECRET_KEY: your-secret-key
  S3_REGION: us-east-1
  S3_BUCKET_NAME: formbricks-uploads
  S3_ENDPOINT_URL: http://minio:9000 # not needed for AWS S3
```

#### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#upgrade-process)  Upgrade Process

**1\. Backup your Database****Critical Step**: Create a complete database backup before proceeding. Formbricks 4.0 will automatically remove unused database tables and fields during startup.

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v4.0_$(date +%Y%m%d_%H%M%S).dump
```

If you run into ‚Äú **No such container**‚Äù, use `docker ps` to find your container name,
e.g. `formbricks_postgres_1`.

**2\. Upgrade to Formbricks 4.0**Pull the latest Docker images and restart the setup (example for docker-compose):

Copy

```
# Pull the latest version
docker compose pull

# Stop the current instance
docker compose down

# Start with Formbricks 4.0
docker compose up -d
```

**3\. Automatic Database Migration**When you start Formbricks 4.0 for the first time, it will **automatically**:

- Detect and apply required database schema updates
- Remove unused database tables and fields
- Optimize the database structure for better performance

No manual intervention is required for the database migration.**4\. Verify Your Upgrade**

- Access your Formbricks instance at the same URL as before
- Test file uploads to ensure S3/MinIO integration works correctly. Check the [File Upload Troubleshooting](https://formbricks.com/docs/self-hosting/configuration/file-uploads#troubleshooting) section if you face any issues.
- Verify that existing surveys and data are intact
- Check that previously uploaded files are accessible

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v3-3)  v3.3

With Formbricks 3.0, we introduced an automatic data migration system. If you‚Äôre using a version older than
**v2.7**, you must upgrade step-by-step through earlier versions (e.g. **2.4 ‚Üí 2.5 ‚Üí 2.6 ‚Üí 2.7**). Once you
reach **v2.7**, you can upgrade directly to **any v3.x or future release** without needing intermediate
migrations.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate)  Steps to Migrate

This guide is for users who are **self-hosting Formbricks** using the **one-click setup**. If you have a different setup, you may need to adjust the commands accordingly.Before running these steps, **navigate to the `formbricks` directory** where your `docker-compose.yml` file is located.

1. **Backup your Database**: Backing up your database is crucial before upgrading. Use the following command to create a backup:

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v3.3_$(date +%Y%m%d_%H%M%S).dump
```

If you run into ‚Äú **No such container**‚Äù, use¬†`docker ps`¬†to find your container name,
e.g.¬†`formbricks_postgres_1`.

If you prefer storing the backup as an `*.sql` file remove the `-Fc` (custom format) option. In case of a restore scenario you will need to use `psql` then with an empty `formbricks` database.

1. Pull the latest version of Formbricks:

Copy

```
docker compose pull
```

1. Stop the running Formbricks instance & remove the related containers:

Copy

```
docker compose down
```

1. Restarting the containers with the latest version of Formbricks:

Copy

```
docker compose up -d
```

When you start the latest version of **Formbricks**, it will **automatically detect and apply any required data migrations** during startup. You don‚Äôt need to run any manual migration steps or download separate migration images.

- Access your updated instance

Once the containers are running, simply go to the **same URL** as before to access your updated **Formbricks** instance.That‚Äôs it! This new process ensures your **Formbricks** setup stays up to date with the latest schema changes as soon as you run the updated container.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v3-2)  v3.2

With Formbricks 3.0, we introduced an automatic data migration system. If you‚Äôre using a version older than
**v2.7**, you must upgrade step-by-step through earlier versions (e.g. **2.4 ‚Üí 2.5 ‚Üí 2.6 ‚Üí 2.7**). Once you
reach **v2.7**, you can upgrade directly to **any v3.x or future release** without needing intermediate
migrations.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate-2)  Steps to Migrate

This guide is for users who are **self-hosting Formbricks** using the **one-click setup**. If you have a different setup, you may need to adjust the commands accordingly.Before running these steps, **navigate to the `formbricks` directory** where your `docker-compose.yml` file is located.

1. **Backup your Database**: Backing up your database is crucial before upgrading. Use the following command to create a backup:

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v3.2_$(date +%Y%m%d_%H%M%S).dump
```

If you run into ‚Äú **No such container**‚Äù, use¬†`docker ps`¬†to find your container name,
e.g.¬†`formbricks_postgres_1`.

If you prefer storing the backup as an `*.sql` file remove the `-Fc` (custom format) option. In case of a restore scenario you will need to use `psql` then with an empty `formbricks` database.

1. Pull the latest version of Formbricks:

Copy

```
docker compose pull
```

1. Stop the running Formbricks instance & remove the related containers:

Copy

```
docker compose down
```

1. Restarting the containers with the latest version of Formbricks:

Copy

```
docker compose up -d
```

When you start the latest version of **Formbricks**, it will **automatically detect and apply any required data migrations** during startup. You don‚Äôt need to run any manual migration steps or download separate migration images.

- Access your updated instance

Once the containers are running, simply go to the **same URL** as before to access your updated **Formbricks** instance.That‚Äôs it! This new process ensures your **Formbricks** setup stays up to date with the latest schema changes as soon as you run the updated container.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v3-1)  v3.1

With Formbricks 3.0, we introduced an automatic data migration system. If you‚Äôre using a version older than
**v2.7**, you must upgrade step-by-step through earlier versions (e.g. **2.4 ‚Üí 2.5 ‚Üí 2.6 ‚Üí 2.7**). Once you
reach **v2.7**, you can upgrade directly to **any v3.x or future release** without needing intermediate
migrations.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate-3)  Steps to Migrate

This guide is for users who are **self-hosting Formbricks** using the **one-click setup**. If you have a different setup, you may need to adjust the commands accordingly.Before running these steps, **navigate to the `formbricks` directory** where your `docker-compose.yml` file is located.

1. **Backup your Database**: Backing up your database is crucial before upgrading. Use the following command to create a backup:

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v3.1_$(date +%Y%m%d_%H%M%S).dump
```

If you run into ‚Äú **No such container**‚Äù, use¬†`docker ps`¬†to find your container name,
e.g.¬†`formbricks_postgres_1`.

If you prefer storing the backup as an `*.sql` file remove the `-Fc` (custom format) option. In case of a restore scenario you will need to use `psql` then with an empty `formbricks` database.

1. Pull the latest version of Formbricks:

Copy

```
docker compose pull
```

1. Stop the running Formbricks instance & remove the related containers:

Copy

```
docker compose down
```

1. Restarting the containers with the latest version of Formbricks:

Copy

```
docker compose up -d
```

When you start the latest version of **Formbricks**, it will **automatically detect and apply any required data migrations** during startup. You don‚Äôt need to run any manual migration steps or download separate migration images.

- Access your updated instance

Once the containers are running, simply go to the **same URL** as before to access your updated **Formbricks** instance.That‚Äôs it! This new process ensures your **Formbricks** setup stays up to date with the latest schema changes as soon as you run the updated container.

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v3-0)  v3.0

**Important: Do Not Upgrade to 3.0 If You Need SSO, User Identification, or Cluster Support**With **Formbricks 3.0**, we‚Äôre making changes to ensure long-term sustainability while still supporting open source. While the **Community Edition** has gained [new features](https://formbricks.com/blog/formbricks-3-0), some [advanced capabilities](https://formbricks.com/docs/self-hosting/license) are now part of the **Enterprise Edition**.‚ö†Ô∏è **No Downgrade Option:** If you upgrade to **3.0** and run the data migration, **you cannot revert to 2.7.2**. If you rely on **SSO, user identification, or cluster support**, either **stay on version 2.7.x** or reach out to us on¬†[**GitHub Discussions**](https://github.com/formbricks/formbricks/discussions) **for a custom quote**.

This major release brings a better approach to **data migrations**.

- If you‚Äôre using **Formbricks v2.7 or later**, you can upgrade **directly** to **v3.x** and future versions.
- If you‚Äôre on a version **older than v2.7**, you **must upgrade step-by-step** (e.g. **2.4 ‚Üí 2.5 ‚Üí 2.6 ‚Üí 2.7**) before moving to v3.x.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate-4)  Steps to Migrate

This guide is for users **self-hosting** Formbricks with the **one-click setup**. If you‚Äôre using a different setup, you might adjust the commands.

- Navigate to the Formbricks Directory

Before running any steps, go to the directory where your `docker-compose.yml` file is located.

- Backup Your Database

Backing up your database is **crucial** before upgrading. Use the following command to create a backup:

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v3.0_$(date +%Y%m%d_%H%M%S).dump
```

**Note:** If you see a ‚ÄúNo such container‚Äù error, run `docker ps` to find your actual container name (e.g.
`formbricks_postgres_1`).

Tip: If you want to store the backup as a `.sql` file, remove the `-Fc` (custom format) option. If you need
to restore it later, use `psql` with an empty Formbricks database.

- Pull the latest version of Formbricks:

Copy

```
docker compose pull
```

- Stop the running Formbricks instance & remove the related containers:

Copy

```
docker compose down
```

- Restarting the containers with the latest version of Formbricks:

Copy

```
docker compose up -d
```

When you start the latest version of Formbricks, it will automatically detect and run any necessary data migrations during startup. There is no need to run any manual migration steps or pull any separate migration images.

- Access your updated instance

That‚Äôs it! Once the containers are up and running, simply navigate to the same URL as before to access your fully migrated Formbricks instance.

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v2-7)  v2.7

AI Features & Database Update: This release lays the groundwork for upcoming AI features, now in private beta. Formbricks requires the `pgvector` extension in PostgreSQL.One-Click Setup Users: Use the `pgvector/pgvector:pg15` image instead of `postgres:15-alpine` to ensure compatibility.

Formbricks v2.7 includes all the features and improvements developed by the community during Hacktoberfest 2024. Additionally, this release introduces an advanced team-based access control system, which is available in the Formbricks Enterprise Edition.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#additional-updates)  Additional Updates

If you previously used organisation-based access control (an enterprise feature) and the `DEFAULT_ORGANIZATION_ROLE` environment variable, update its value to one of these roles: `owner`, `manager`, or `member`. Read more about the new roles in the [documentation](https://formbricks.com/docs/xm-and-surveys/core-features/user-management).

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate-5)  Steps to Migrate

This guide is for users who are self-hosting Formbricks using our one-click setup. If you are using a different setup, you might adjust the commands accordingly.To run all these steps, please navigate to the Formbricks folder where your `docker-compose.yml` file is located.

- **Backup your Database:** This is a crucial step. Please make sure to backup your database before proceeding with the upgrade. You can use the following command to backup your database.

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v2.7_$(date +%Y%m%d_%H%M%S).dump
```

If you run into ‚ÄúNo such container‚Äù, use¬†`docker ps`¬†to find your container name,
e.g.¬†`formbricks_postgres_1`.

If you want to store the backup as an \*.sql file, remove the `-Fc` option. To restore, use `psql` with an
empty Formbricks database.

- If you use an older `docker-compose.yml` file from the one-click setup, modify it to use the `pgvector/pgvector:pg15` image instead of `postgres:15-alpine`:

Copy

```
services:
  postgres:
    image: pgvector/pgvector:pg15
    volumes:
      - postgres:/var/lib/postgresql/data
    environment:
      - POSTGRES_DB=postgres
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
    ports:
      - 5432:5432
```

- Pull the latest version of Formbricks:

Copy

```
docker compose pull
```

- Stop the running Formbricks instance and remove the related containers:

Copy

```
docker compose down
```

- Restarting the containers with the latest version of Formbricks:

Copy

```
docker compose up -d
```

- Now let‚Äôs migrate the data to the latest schema:

To find the Docker network name for your Postgres database, run `docker network ls`.

Copy

```
docker pull ghcr.io/formbricks/data-migrations:latest && \
docker run --rm \
  --network=formbricks_default \
  -e DATABASE_URL="postgresql://postgres:postgres@postgres:5432/formbricks?schema=public" \
  -e UPGRADE_TO_VERSION="v2.7" \
  ghcr.io/formbricks/data-migrations:v2.7.0
```

The command above will migrate your data to the latest schema. This step is important to update your existing data to the new structure. The changes will only be made if the script runs successfully. You can run the script multiple times safely.

- That‚Äôs it! Once the migration is finished, you can **access your Formbricks instance** at the same URL as before.

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v2-6)  v2.6

Formbricks v2.6 introduces advanced logic jumps for surveys, allowing more complex branching logic, including variables, conditions, and more. This release also includes numerous bug fixes, significant performance improvements for website and app surveys, and enhanced stability.

This release includes the final step of deprecating server-side action tracking (previously used for segment
filtering by performed actions). The migrations will delete all tracked actions from the database. If you
still need these action records, ensure you export them before upgrading.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate-6)  Steps to Migrate

This guide is for users who are self-hosting Formbricks using our one-click setup. If you‚Äôre using a different setup, you might need to adjust the commands accordingly.To run these steps, navigate to the folder where your `docker-compose.yml` file is located.

- **Backup your Database:** This is an important step. Make sure to back up your database before proceeding with the upgrade. You can use this command to back up your database:

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v2.6_$(date +%Y%m%d_%H%M%S).dump
```

If you get a ‚ÄúNo such container‚Äù error, run `docker ps` to find your container name, for example,
`formbricks_postgres_1`.

If you prefer storing the backup as an¬†`*.sql`¬†file remove the¬†`-Fc`¬†(custom format) option. In case of a
restore scenario, you will need to use¬†`psql`¬†then with an empty¬†`formbricks`¬†database.

- Pull the latest version of Formbricks:

Copy

```
docker compose pull
```

- Stop the running Formbricks instance & remove the related containers:

Copy

```
docker compose down
```

- Restarting the containers with the latest version of Formbricks:

Copy

```
docker compose up -d
```

- Now let‚Äôs migrate the data to the latest schema:

To find the Docker network name for your Postgres database, run the command:

Copy

```
docker pull ghcr.io/formbricks/data-migrations:latest && \
docker run --rm \
  --network=formbricks_default \
  -e DATABASE_URL="postgresql://postgres:postgres@postgres:5432/formbricks?schema=public" \
  -e UPGRADE_TO_VERSION="v2.6" \
  ghcr.io/formbricks/data-migrations:v2.6.0
```

The command above will migrate your data to the latest schema. This is an important step to update your existing data to the new structure. Changes will only be made if the script runs successfully. You can run the script multiple times without issues.

- Once the migration is complete, **you can access your Formbricks instance** at the same URL as before.

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v2-5)  v2.5

Formbricks v2.5 lets you visualise responses in a data table format. This release also brings a few bug fixes and performance improvements.

This release fixes the inconsistency of CTA and consent question values when a question is skipped. The
value will now be set to an empty string instead of ‚Äúdismissed‚Äù to maintain consistency with other
questions.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate-7)  Steps to Migrate

This guide is for users self-hosting Formbricks with our one-click setup. If you‚Äôre using a different setup, you may need to adjust the commands.To begin, navigate to the folder where your `docker-compose.yml` file is located.

- **Backup your Database**: This step is important. Please make sure to back up your database before upgrading. You can use the following command to back up your database:

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v2.5_$(date +%Y%m%d_%H%M%S).dump
```

If you run into ‚ÄúNo such container‚Äù, use `docker ps` to find your container name,
e.g.`formbricks_postgres_1`.

If you prefer storing the backup as an¬†`*.sql`¬†file remove the¬†`-Fc`¬†(custom format) option. In case of a
restore scenario you will need to use¬†`psql`¬†then with an empty¬†`formbricks`¬†database.

- Pull the latest version of Formbricks:

Copy

```
docker compose pull
```

- Stop the running Formbricks instance & remove the related containers:

Copy

```
docker compose down
```

- Restarting the containers with the latest version of Formbricks:

Copy

```
docker compose up -d
```

- Now let‚Äôs migrate the data to the latest schema:

To find your Docker Network name for your Postgres Database, find it using `docker network ls`

Copy

```
docker pull ghcr.io/formbricks/data-migrations:latest && \
docker run --rm \
  --network=formbricks_default \
  -e DATABASE_URL="postgresql://postgres:postgres@postgres:5432/formbricks?schema=public" \
  -e UPGRADE_TO_VERSION="v2.5" \
  ghcr.io/formbricks/data-migrations:v2.5.3
```

The command will migrate your data to the latest schema, ensuring your existing data is updated to the new structure. Changes will only be made if the script runs successfully, and you can safely run the script multiple times.

- Once the migration is complete, **you can access your Formbricks instance** at the same URL as before.

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v2-4)  v2.4

Formbricks v2.4 lets you create multiple endings for your surveys and choose which one users see based on logic jumps. This version also includes bug fixes and performance improvements.

This release will remove support for advanced targeting (enterprise targeting for app surveys) using actions
(e.g. targeting users who triggered action x 3 times in the last month). Actions can still be used as
triggers, but they will no longer be stored on the server to improve Formbricks‚Äô overall performance.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate-8)  Steps to Migrate

This guide is for users who are self-hosting Formbricks with our one-click setup. If you‚Äôre using a different setup, you may need to adjust the commands accordingly.To follow these steps, go to the folder where your `docker-compose.yml` file is located.

1. **Backup your Database**: This step is important. Please make sure to back up your database before upgrading. You can use the following command to back up your database:

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v2.4_$(date +%Y%m%d_%H%M%S).dump
```

If you run into ‚ÄúNo such container‚Äù, use¬†`docker ps`¬†to find your container name,
e.g.¬†`formbricks_postgres_1`.

If you prefer storing the backup as a¬†`*.sql`¬†file, remove the¬†`-Fc`¬†(custom format) option. In case of a
restore scenario, you will need to use¬†`psql`¬†then with an empty¬†`formbricks`¬†database.

- Pull the latest version of Formbricks:

Copy

```
docker compose pull
```

- Stop the running Formbricks instance & remove the related containers:

Copy

```
docker compose down
```

- Restarting the containers with the latest version of Formbricks:

Copy

```
docker compose up -d
```

Now let‚Äôs migrate the data to the latest schema:To find your Docker Network name for your Postgres Database, find it using `docker network ls`

Copy

```
docker pull ghcr.io/formbricks/data-migrations:v2.4.3 && \
docker run --rm \
  --network=formbricks_default \
  -e DATABASE_URL="postgresql://postgres:postgres@postgres:5432/formbricks?schema=public" \
  -e UPGRADE_TO_VERSION="v2.4" \
  ghcr.io/formbricks/data-migrations:v2.4.3
```

The command above will migrate your data to the latest schema. This is an important step to update your data structure. Changes are only applied if the script runs successfully. You can run the script multiple times without issues.

- That‚Äôs it! Once the migration is done, you can access your Formbricks instance at the same URL as before.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#additional-updates-2)  Additional Updates

- The `CRON_SECRET` environment variable is now required to enhance the security of the internal cron APIs. Please ensure that this variable is set in your environment or `docker-compose.yml`. You can generate a secure secret using `openssl rand -hex 32`

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v2-3)  v2.3

Formbricks v2.3 introduces new colour options for rating questions, enhanced multi-language support for Chinese (Simplified & Traditional), and includes several bug fixes and performance improvements.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate-9)  Steps to Migrate

You only need to run the data migration if you have surveys set up in Chinese (`zh`). If you don‚Äôt have any
surveys in Chinese, you can skip the migration step.

This guide is for users self-hosting Formbricks with our one-click setup. If you‚Äôre using a different setup, adjust the commands as needed.To proceed, go to the folder where your `docker-compose.yml` file is located.

- **Backup your Database**: This is a crucial step. Please make sure to backup your database before proceeding with the upgrade. You can use the following command to backup your database:

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v2.3_$(date +%Y%m%d_%H%M%S).dump
```

If you run into ‚Äú **No such containe** r‚Äù, use `docker ps` to find your container name, e.g.
`formbricks_postgres_1`.

If you prefer storing the backup as an `*.sql` file remove the `-Fc` (custom format) option. In case of a
restore scenario you will need to use `psql` then with an empty `formbricks` database.

- Pull the latest version of Formbricks:

Copy

```
docker compose pull
```

- Stop the running Formbricks instance & remove the related containers:

Copy

```
docker compose down
```

- Restarting the containers with the latest version of Formbricks:

Copy

```
docker compose up -d
```

- Now let‚Äôs migrate the data to the latest schema:

To find your Docker Network name for your Postgres Database, find it using `docker network ls`

Copy

```
docker pull ghcr.io/formbricks/data-migrations:v2.3.0 && \
docker run --rm \
  --network=formbricks_default \
  -e DATABASE_URL="postgresql://postgres:postgres@postgres:5432/formbricks?schema=public" \
  -e UPGRADE_TO_VERSION="v2.3" \
  ghcr.io/formbricks/data-migrations:v2.3.0
```

The command above will migrate your data to the latest schema, which is essential for updating your data structure. Changes will only be made if the script runs successfully. You can safely run the script multiple times.

- Once the migration is complete, **you can access your Formbricks instance** at the same URL as before.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#additional-updates-3)  Additional Updates

The feature to create short URLs in Formbricks is now deprecated. Existing short URLs will continue to work for now, but it is recommended to use long URLs instead. Support for short URL redirects will be removed in a future release.

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v2-2)  v2.2

Formbricks v2.2 introduces XM research presets, providing a brand-new product onboarding experience. Our goal is to make user research ‚Äúobviously easy‚Äù across different industries, starting with Software-as-a-Service and E-Commerce.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate-10)  Steps to Migrate

This guide is for users who are self-hosting Formbricks with our one-click setup. If you‚Äôre using a different setup, you may need to adjust the commands accordingly.To run all these steps, please navigate to the `formbricks` folder where your `docker-compose.yml` file is located.

1. **Backup your Database**: This is a crucial step. Please make sure to backup your database before proceeding with the upgrade. You can use the following command to backup your database:

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v2.2_$(date +%Y%m%d_%H%M%S).dump
```

If you run into ‚ÄúNo such container‚Äù, use `docker ps` to find your container name, e.g.
`formbricks_postgres_1`.

If you prefer storing the backup as an¬†`*.sql`¬†file remove the¬†`-Fc`¬†(custom format) option. In case of a
restore scenario you will need to use¬†`psql`¬†then with an empty¬†`formbricks`¬†database.

- Pull the latest version of Formbricks:

Copy

```
docker compose pull
```

- Stop the running Formbricks instance & remove the related containers:

Copy

```
docker compose down
```

- Restarting the containers with the latest version of Formbricks:

Copy

```
docker compose up -d
```

- Now let‚Äôs migrate the data to the latest schema:

To find your Docker Network name for your Postgres Database, find it using `docker network ls`

Copy

```
docker pull ghcr.io/formbricks/data-migrations:v2.2 && \
docker run --rm \
  --network=formbricks_default \
  -e DATABASE_URL="postgresql://postgres:postgres@postgres:5432/formbricks?schema=public" \
  -e UPGRADE_TO_VERSION="v2.2" \
  ghcr.io/formbricks/data-migrations:v2.2
```

The command above will migrate your data to the latest schema. This is an important step to update your existing data. Changes will only be made if the script runs successfully. You can safely run the script multiple times.

- Once the migration is complete, **you can access your Formbricks instance** at the same URL as before.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#changes-in-environment-variables)  Changes in Environment Variables

- The `ONBOARDING_DISABLED` environment variable is now deprecated. We have replaced the user onboarding with a product onboarding process that only runs when creating a new product.

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v2-1)  v2.1

Formbricks v2.1 introduces more options for creating No-Code Actions and improves the self-hosting experience with a new onboarding process for fresh instances.

To improve the user experience and simplify setup for self-hosting instances, we are transitioning to a single organization model. This change allows self-hosts to manage their instance centrally and more easily control access. A new permissions system will also be introduced soon, providing more granular control over projects and resources within an organization.If you‚Äôve previously created multiple organizations, you can still switch between them in the UI, but creating new organizations will no longer be possible.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate-11)  Steps to Migrate

This guide is for users self-hosting Formbricks using our one-click setup. If you are using a different setup, you may need to adjust the commands accordingly.To follow these steps, please navigate to the Formbricks folder where your `docker-compose.yml` file is located.

- **Backup your Database**: This is an essential step. Please ensure that you back up your database before proceeding with the upgrade. You can use the following command to back it up:

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v2.1_$(date +%Y%m%d_%H%M%S).dump
```

If you run into ‚ÄúNo such container‚Äù, use `docker ps` to find your container name, e.g.
`formbricks_postgres_1`.

If you prefer storing the backup as a `*.sql` file remove the `-Fc` (custom format) option. In case of a
restore scenario you will need to use `psql` then with an empty `formbricks` database.

- Pull the latest version of Formbricks:

Copy

```
docker compose pull
```

- Stop the running Formbricks instance & remove the related containers.

Copy

```
docker compose down
```

- Restarting the containers with the latest version of Formbricks:

Copy

```
docker compose up -d
```

- Now let‚Äôs migrate the data to the latest schema:

To find your Docker network name for the Postgres database, run the following `docker network ls`

Copy

```
docker pull ghcr.io/formbricks/data-migrations:v2.1.0 && \
docker run --rm \
  --network=formbricks_default \
  -e DATABASE_URL="postgresql://postgres:postgres@postgres:5432/formbricks?schema=public" \
  -e UPGRADE_TO_VERSION="v2.1" \
  ghcr.io/formbricks/data-migrations:v2.1.0
```

Once the migration script runs successfully, your data will be migrated to the latest schema. The script is designed to run safely multiple times, so you don‚Äôt need to worry if it‚Äôs executed more than once. After completing the migration, you can continue to access your Formbricks instance at the same URL as before.

- That‚Äôs it! Once the migration is complete, you can **now access your Formbricks instance** at the same URL as before.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#changes-in-environment-variables-2)  Changes in Environment Variables

- **SIGNUP\_DISABLED** is now deprecated. Self-hosting instances have signup disabled by default, and new users can only be invited by the organization owner or admin.
- **DEFAULT\_TEAM\_ID** has been renamed to **DEFAULT\_ORGANIZATION\_ID**.
- **DEFAULT\_TEAM\_ROLE** has been renamed to **DEFAULT\_ORGANIZATION\_ROLE**.

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v2-0)  v2.0

Formbricks v2.0 introduces significant features such as **Multi-Language Surveys** and **Advanced Styling for Surveys**, aimed at improving the flexibility and appearance of your surveys. Additionally, the release includes several optimisations, bug fixes, and smaller improvements to ensure a smoother user experience.If you are upgrading to Formbricks v2.0, follow this guide to ensure a smooth migration of your existing Formbricks instance without encountering issues or build errors.

This upgrade requires a **data migration**. Please make sure to back up your database before proceeding.
Follow the steps below to upgrade your Formbricks instance to v2.0.

If you‚Äôve used the Formbricks Enterprise Edition with a free beta license key, your instance will be
downgraded to the Community Edition 2.0. You can find all license details on the [license\\
page](https://formbricks.com/docs/self-hosting/license).

We are moving from DockerHub to GitHub Packages for our images. If you are still pulling the images from
DockerHub please change¬†`image:     formbricks/formbricks:latest`¬†to¬†`image:ghcr.io/formbricks/formbricks:latest`¬†in
your¬†`docker-compose.yml`¬†file.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate-12)  Steps to Migrate

This guide is for users who are self-hosting Formbricks using our one-click setup. If you are using a different setup, you might adjust the commands accordingly.To run all these steps, please navigate to the `formbricks` folder where your `docker-compose.yml` file is located.

1. **Backup your Database**: This is an essential step. Please ensure that you back up your database before proceeding with the upgrade. You can use the following command to back it up:

Copy

```
docker exec formbricks-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v2.0_$(date +%Y%m%d_%H%M%S).dump
```

If you run into ‚ÄúNo such container‚Äù, use¬†`docker ps`¬†to find your container name,
e.g.¬†`formbricks_postgres_1`.

If you prefer storing the backup as an `*.sql` file remove the `-Fc` (custom format) option. In case of a restore scenario you will need to use `psql` then with an empty `formbricks` database.

- Pull the latest version of Formbricks:

Copy

```
docker compose pull
```

- Stop the running Formbricks instance & remove the related containers:

Copy

```
docker compose down
```

- Restarting the containers with the latest version of Formbricks:

Copy

```
docker compose up -d
```

- Now let‚Äôs migrate the data to the latest schema:

To find your Docker Network name for your Postgres Database, find it using `docker network ls`

Copy

```
docker pull ghcr.io/formbricks/data-migrations:v2.0.3 && \
docker run --rm \
  --network=formbricks_default \
  -e DATABASE_URL="postgresql://postgres:postgres@postgres:5432/formbricks?schema=public" \
  -e UPGRADE_TO_VERSION="v2.0" \
  ghcr.io/formbricks/data-migrations:v2.0.3
```

The above command will migrate your data to the latest schema. This is a crucial step to migrate your existing data to the new structure. Only if the script runs successful, changes are made to the database. The script can safely run multiple times.

- That‚Äôs it! Once the migration is complete, you can **now access your Formbricks instance** at the same URL as before.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#app-surveys-with-@formbricks/js)  App Surveys with @formbricks/js

With this upgrade, we now dynamically fetch the package from our API endpoint and have updated the package entry points to support both app and website surveys. This ensures that you always have the latest version of the package (v2.0.0+).**Old approach:** (v1.6.5)

Copy

```
import formbricks from "@formbricks/js";

formbricks.init({
  environmentId: "<environment-id>",
  apiHost: "<api-host>",
  userId: "<user-id>", // optional
});
```

**New approach:** (v2.0.0)Website surveys:

Copy

```
import formbricks from "@formbricks/js/website";

formbricks.init({
  environmentId: "<environment-id>",
  apiHost: "<api-host>",
  // userId is not supported here
});
```

App surveys:

Copy

```
import formbricks from "@formbricks/js/app";

formbricks.init({
  environmentId: "<environment-id>",
  apiHost: "<api-host>",
  userId: "<user-id>", // required
});
```

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v1-6)  v1.6

Formbricks v1.6 introduces key features like Advanced Targeting, Segmentation, on-the-fly survey triggers, and stability improvements. This update also changes some environment variables. Follow this guide to upgrade your Formbricks instance to v1.6 smoothly.

This upgrade requires a data migration. Ensure you back up your database before proceeding. Follow the steps
below to upgrade your Formbricks instance to v1.6.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#steps-to-migrate-13)  Steps to Migrate

This guide is for users self-hosting Formbricks with our one-click setup. If you‚Äôre using a different setup, adjust the commands accordingly.Navigate to the Formbricks folder containing your `docker-compose.yml` file to run the steps.

- **Backup your Database**: This is a crucial step. Please make sure to backup your database before proceeding with the upgrade. You can use the following command to backup your database:

Copy

```
docker exec formbricks-quickstart-postgres-1 pg_dump -Fc -U postgres -d formbricks > formbricks_pre_v1.6_$(date +%Y%m%d_%H%M%S).dump
```

If you run into ‚ÄúNo such container‚Äù, use¬†`docker ps`¬†to find your container name,
e.g.¬†`formbricks_postgres_1`.

If you prefer storing the backup as a¬†`*.sql`¬†file remove the¬†`-Fc`¬†(custom format) option. In case of a
restore scenario you will need to use¬†`psql`¬†then with an empty¬†`formbricks`¬†database.

- Stop the running Formbricks instance & remove the related containers:

Copy

```
docker compose down
```

- Restarting the containers will automatically pull the latest version of Formbricks:

Copy

```
docker compose up -d
```

- Now let‚Äôs migrate the data to the latest schema:

To find your Docker Network name for your Postgres Database, find it using `docker network ps`

Copy

```
docker run --rm \
  --network=formbricks_default \
  -e DATABASE_URL="postgresql://postgres:postgres@postgres:5432/formbricks?schema=public" \
  -e UPGRADE_TO_VERSION="v1.6" \
  ghcr.io/formbricks/data-migrations:v1.6.1
```

The above command will migrate your data to the latest schema. This is a crucial step to migrate your existing data to the new structure. Only if the script runs successful, changes are made to the database. The script can safely run multiple times.

1. That‚Äôs it! Once the migration is complete, you can **now access your Formbricks instance** at the same URL as before.

#### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#restoring-the-database-after-a-failed-upgrade)  Restoring the database after a failed upgrade

Copy

```
docker exec -i formbricks-quickstart-postgres-1 pg_restore --clean -U postgres -v -d formbricks < formbricks_pre_v1.6_<timestamp_of_your_dump_file>.dump
```

Replace the path to `formbricks_pre_v1.6_<timestamp_of_your_dump_file>.dump` with the exact path to your `.dump` file.

This will wipe the database and restore from the¬†`.dump`¬†file.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#app-surveys-with-@formbricks/js-2)  App Surveys with `@formbricks/js`

If you‚Äôre using the `@formbricks/js` package, update it to version ~1.6.5 to access the latest features and improvements.

Currently, the package needs to be pinned to `~1.6.5`, see [this\\
issue](https://github.com/formbricks/formbricks/issues/2273).

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#upgrade-and-pin-the-client-package)  Upgrade and pin the client package

Copy

```
npm install @formbricks/js@~1.6.5
```

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#deprecated-environment-variables)  Deprecated Environment Variables

| Environment Variable | Comments |
| --- | --- |
| `GITHUB_AUTH_ENABLED` | Was used to enable GitHub OAuth, but from v1.6, you can just set the `GITHUB_ID` and `GITHUB_SECRET` environment variables. |
| `GOOGLE_AUTH_ENABLED` | Was used to enable Google OAuth, but from v1.6, you can just set the `GOOGLE_CLIENT_ID` and `GOOGLE_CLIENT_SECRET` environment variables. |
| `AZUREAD_AUTH_ENABLED` | Was used to enable AzureAD OAuth, but from v1.6, you can just set the `AZUREAD_CLIENT_ID`, `AZUREAD_CLIENT_SECRET` & `AZUREAD_TENANT_ID` environment variables. |

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v1-2)  v1.2

Formbricks v1.2 introduces new features for Link Surveys and enhances security. However, there are some breaking changes related to environment variables. This guide will help you upgrade your Formbricks instance to v1.2 smoothly.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#new-environment-variables)  New Environment Variables

| Environment Variable | Required | Recommended Generation | Comments |
| --- | --- | --- | --- |
| `ENCRYPTION_KEY` | true | `openssl rand -hex 32` | Needed for 2 Factor Authentication |

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#deprecated-/-removed-environment-variables)  Deprecated / Removed Environment Variables

| Environment Variable | Comments |
| --- | --- |
| `SURVEY_BASE_URL` | The `WEBAPP_URL` is now used to determine the survey base URL in all places |

## [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#v1-1)  v1.1

Formbricks v1.1 introduces new features and improvements but includes breaking changes with environment variables. This guide will help you upgrade your Formbricks instance to v1.1 without data loss.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#renamed-environment-variables)  Renamed Environment Variables

| till v1.0 | v1.1 |
| --- | --- |
| `NEXT_PUBLIC_EMAIL_VERIFICATION_DISABLED` | `EMAIL_VERIFICATION_DISABLED` |
| `NEXT_PUBLIC_PASSWORD_RESET_DISABLED` | `PASSWORD_RESET_DISABLED` |
| `NEXT_PUBLIC_SIGNUP_DISABLED` | `SIGNUP_DISABLED` |
| `NEXT_PUBLIC_INVITE_DISABLED` | `INVITE_DISABLED` |
| `NEXT_PUBLIC_PRIVACY_URL` | `PRIVACY_URL` |
| `NEXT_PUBLIC_TERMS_URL` | `TERMS_URL` |
| `NEXT_PUBLIC_IMPRINT_URL` | `IMPRINT_URL` |
| `NEXT_PUBLIC_GITHUB_AUTH_ENABLED` | `GITHUB_AUTH_ENABLED` |
| `NEXT_PUBLIC_GOOGLE_AUTH_ENABLED` | `GOOGLE_AUTH_ENABLED` |
| `NEXT_PUBLIC_WEBAPP_URL` | `WEBAPP_URL` |
| `NEXT_PUBLIC_IS_FORMBRICKS_CLOUD` | `IS_FORMBRICKS_CLOUD` |
| `NEXT_PUBLIC_SURVEY_BASE_URL` | `SURVEY_BASE_URL` |

Please note that their values and the logic remains exactly the same. Only the prefix has been deprecated. The other environment variables remain the same as well.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#deprecated-environment-variables-2)  Deprecated Environment Variables

- **`NEXT_PUBLIC_VERCEL_URL`**: Was used as Vercel URL (used instead of `WEBAPP_URL)`, but from v1.1, you can just set the `WEBAPP_URL` environment variable to your Vercel URL.
- **`RAILWAY_STATIC_URL`**: Was used as Railway Static URL (used instead of `WEBAPP_URL`), but from v1.1, you can just set the `WEBAPP_URL` environment variable.
- **`RENDER_EXTERNAL_URL`**: Was used as an external URL to Render (used instead of `WEBAPP_URL`), but from v1.1, you can just set the `WEBAPP_URL` environment variable.
- **`HEROKU_APP_NAME`**: Was used to build the App name on a Heroku hosted webapp, but from v1.1, you can just set the `WEBAPP_URL` environment variable.
- **`NEXT_PUBLIC_WEBAPP_URL`**: Was used for the same purpose as `WEBAPP_URL`, but from v1.1, you can just set the `WEBAPP_URL` environment variable.
- **`PRISMA_GENERATE_DATAPROXY`**: Was used to tell Prisma that it should generate the runtime for Dataproxy usage. But its officially deprecated now.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#helper-shell-script)  Helper Shell Script

For a seamless migration, below is a shell script for your self-hosted instance that will automatically update your environment variables to be compliant with the new naming conventions.

### [‚Äã](https://formbricks.com/docs/self-hosting/advanced/migration\#docker-&-single-script-setup)  Docker & Single Script Setup

Now that these variables can be defined at runtime, you can append them inside your `x-environment` in the `docker-compose.yml` itself.
For a more detailed guide on these environment variables, please refer to the [Important Runtime Variables](https://formbricks.com/docs/self-hosting/setup/docker#important-run-time-variables) section.

docker-compose.yml

Copy

```
version: "3.3"
x-environment: &environment
  environment:
    # The url of your Formbricks instance used in the admin panel
    WEBAPP_URL:

    # Required for next-auth. Should be the same as WEBAPP_URL
    NEXTAUTH_URL:

    # PostgreSQL DB for Formbricks to connect to
    DATABASE_URL: "postgresql://postgres:postgres@postgres:5432/formbricks?schema=public"

    # NextJS Auth
    # @see: https://next-auth.js.org/configuration/options#nextauth_secret
    # You can use: `openssl rand -hex 32` to generate one
    NEXTAUTH_SECRET:

    # PostgreSQL password
    POSTGRES_PASSWORD: postgres

    # Email Configuration
    MAIL_FROM:
    MAIL_FROM_NAME:
    SMTP_HOST:
    SMTP_PORT:
    SMTP_SECURE_ENABLED:
    SMTP_USER:
    SMTP_PASSWORD:

    # Uncomment the below and set it to 1 to disable Email Verification for new signups
    # EMAIL_VERIFICATION_DISABLED:

    # Uncomment the below and set it to 1 to disable Password Reset
    # PASSWORD_RESET_DISABLED:

    # Uncomment the below and set it to 1 to disable Signups
    # SIGNUP_DISABLED:

    # Uncomment the below and set it to 1 to disable loging in with email
    # EMAIL_AUTH_DISABLED:

    # Uncomment the below and set it to 1 to disable Invites
    # INVITE_DISABLED:

    # Uncomment the below and set a value to have your own Privacy Page URL on the signup & login page
    # PRIVACY_URL:

    # Uncomment the below and set a value to have your own Terms Page URL on the auth and the surveys page
    # TERMS_URL:

    # Uncomment the below and set a value to have your own Imprint Page URL on the auth and the surveys page
    # IMPRINT_URL:

    # Uncomment the below and set to 1 if you want to enable GitHub OAuth
    # GITHUB_AUTH_ENABLED:
    # GITHUB_ID:
    # GITHUB_SECRET:

    # Uncomment the below and set to 1 if you want to enable Google OAuth
    # GOOGLE_AUTH_ENABLED:
    # GOOGLE_CLIENT_ID:
    # GOOGLE_CLIENT_SECRET:
```

If you have any questions or require help, feel free to reach out to us on¬†[**GitHub Discussions**](https://github.com/formbricks/formbricks/discussions). üòÉ

Was this page helpful?

YesNo

[ActivePieces (On Premise)](https://formbricks.com/docs/self-hosting/configuration/integrations/activepieces) [License](https://formbricks.com/docs/self-hosting/advanced/license)

Ctrl+I

[github](https://github.com/formbricks/formbricks) [linkedin](https://linkedin.com/company/formbricks) [x](https://x.com/formbricks)

[Powered by Mintlify](https://www.mintlify.com/?utm_campaign=poweredBy&utm_medium=referral&utm_source=formbricks)

Assistant

Responses are generated using AI and may contain mistakes.