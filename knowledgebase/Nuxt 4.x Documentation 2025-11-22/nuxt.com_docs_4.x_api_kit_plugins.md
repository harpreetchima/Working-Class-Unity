---
url: "https://nuxt.com/docs/4.x/api/kit/plugins"
title: "Plugins ¬∑ Nuxt Kit v4"
---

[Back to home](https://nuxt.com/) v4.2.1

- [Docs](https://nuxt.com/docs/4.x)
- [Modules](https://nuxt.com/modules)
- [Templates](https://nuxt.com/templates)
- [Resources](https://nuxt.com/showcase)
- [Enterprise](https://nuxt.com/enterprise)
- [Blog](https://nuxt.com/blog)

Search‚Ä¶
`Ctrl`  `k`
[58.9K](https://go.nuxt.com/github)

- [Get Started](https://nuxt.com/docs/4.x/getting-started/installation)
- [Structure](https://nuxt.com/docs/4.x/directory-structure)
- [Guide](https://nuxt.com/docs/4.x/guide)
- [API](https://nuxt.com/docs/4.x/api)
- [Deploy](https://nuxt.com/deploy)
- [Examples](https://nuxt.com/docs/4.x/examples)
- [Community](https://nuxt.com/docs/4.x/community)

- Components


- [<ClientOnly>](https://nuxt.com/docs/4.x/api/components/client-only)
- [<DevOnly>](https://nuxt.com/docs/4.x/api/components/dev-only)
- [<NuxtClientFallback>](https://nuxt.com/docs/4.x/api/components/nuxt-client-fallback)
- [<NuxtPicture>](https://nuxt.com/docs/4.x/api/components/nuxt-picture)
- [<Teleport>](https://nuxt.com/docs/4.x/api/components/teleports)
- [<NuxtRouteAnnouncer>](https://nuxt.com/docs/4.x/api/components/nuxt-route-announcer)
- [<NuxtTime>](https://nuxt.com/docs/4.x/api/components/nuxt-time)
- [<NuxtPage>](https://nuxt.com/docs/4.x/api/components/nuxt-page)
- [<NuxtLayout>](https://nuxt.com/docs/4.x/api/components/nuxt-layout)
- [<NuxtLink>](https://nuxt.com/docs/4.x/api/components/nuxt-link)
- [<NuxtLoadingIndicator>](https://nuxt.com/docs/4.x/api/components/nuxt-loading-indicator)
- [<NuxtErrorBoundary>](https://nuxt.com/docs/4.x/api/components/nuxt-error-boundary)
- [<NuxtWelcome>](https://nuxt.com/docs/4.x/api/components/nuxt-welcome)
- [<NuxtIsland>](https://nuxt.com/docs/4.x/api/components/nuxt-island)
- [<NuxtImg>](https://nuxt.com/docs/4.x/api/components/nuxt-img)

- Composables


- [onPrehydrate](https://nuxt.com/docs/4.x/api/composables/on-prehydrate)
- [useAppConfig](https://nuxt.com/docs/4.x/api/composables/use-app-config)
- [useAsyncData](https://nuxt.com/docs/4.x/api/composables/use-async-data)
- [useCookie](https://nuxt.com/docs/4.x/api/composables/use-cookie)
- [useError](https://nuxt.com/docs/4.x/api/composables/use-error)
- [useFetch](https://nuxt.com/docs/4.x/api/composables/use-fetch)
- [useHead](https://nuxt.com/docs/4.x/api/composables/use-head)
- [useHeadSafe](https://nuxt.com/docs/4.x/api/composables/use-head-safe)
- [useHydration](https://nuxt.com/docs/4.x/api/composables/use-hydration)
- [useLazyAsyncData](https://nuxt.com/docs/4.x/api/composables/use-lazy-async-data)
- [useLazyFetch](https://nuxt.com/docs/4.x/api/composables/use-lazy-fetch)
- [useLoadingIndicator](https://nuxt.com/docs/4.x/api/composables/use-loading-indicator)
- [useNuxtApp](https://nuxt.com/docs/4.x/api/composables/use-nuxt-app)
- [useNuxtData](https://nuxt.com/docs/4.x/api/composables/use-nuxt-data)
- [usePreviewMode](https://nuxt.com/docs/4.x/api/composables/use-preview-mode)
- [useRequestEvent](https://nuxt.com/docs/4.x/api/composables/use-request-event)
- [useRequestFetch](https://nuxt.com/docs/4.x/api/composables/use-request-fetch)
- [useRequestHeader](https://nuxt.com/docs/4.x/api/composables/use-request-header)
- [useRequestHeaders](https://nuxt.com/docs/4.x/api/composables/use-request-headers)
- [useRequestURL](https://nuxt.com/docs/4.x/api/composables/use-request-url)
- [useResponseHeader](https://nuxt.com/docs/4.x/api/composables/use-response-header)
- [useRoute](https://nuxt.com/docs/4.x/api/composables/use-route)
- [useRouteAnnouncer](https://nuxt.com/docs/4.x/api/composables/use-route-announcer)
- [useRouter](https://nuxt.com/docs/4.x/api/composables/use-router)
- [useRuntimeConfig](https://nuxt.com/docs/4.x/api/composables/use-runtime-config)
- [useRuntimeHook](https://nuxt.com/docs/4.x/api/composables/use-runtime-hook)
- [useSeoMeta](https://nuxt.com/docs/4.x/api/composables/use-seo-meta)
- [useServerSeoMeta](https://nuxt.com/docs/4.x/api/composables/use-server-seo-meta)
- [useState](https://nuxt.com/docs/4.x/api/composables/use-state)

- Utils


- [$fetch](https://nuxt.com/docs/4.x/api/utils/dollarfetch)
- [abortNavigation](https://nuxt.com/docs/4.x/api/utils/abort-navigation)
- [addRouteMiddleware](https://nuxt.com/docs/4.x/api/utils/add-route-middleware)
- [callOnce](https://nuxt.com/docs/4.x/api/utils/call-once)
- [clearError](https://nuxt.com/docs/4.x/api/utils/clear-error)
- [clearNuxtData](https://nuxt.com/docs/4.x/api/utils/clear-nuxt-data)
- [clearNuxtState](https://nuxt.com/docs/4.x/api/utils/clear-nuxt-state)
- [createError](https://nuxt.com/docs/4.x/api/utils/create-error)
- [defineLazyHydrationComponent](https://nuxt.com/docs/4.x/api/utils/define-lazy-hydration-component)
- [defineNuxtComponent](https://nuxt.com/docs/4.x/api/utils/define-nuxt-component)
- [defineNuxtPlugin](https://nuxt.com/docs/4.x/api/utils/define-nuxt-plugin)
- [defineNuxtRouteMiddleware](https://nuxt.com/docs/4.x/api/utils/define-nuxt-route-middleware)
- [definePageMeta](https://nuxt.com/docs/4.x/api/utils/define-page-meta)
- [defineRouteRules](https://nuxt.com/docs/4.x/api/utils/define-route-rules)
- [navigateTo](https://nuxt.com/docs/4.x/api/utils/navigate-to)
- [onBeforeRouteLeave](https://nuxt.com/docs/4.x/api/utils/on-before-route-leave)
- [onBeforeRouteUpdate](https://nuxt.com/docs/4.x/api/utils/on-before-route-update)
- [onNuxtReady](https://nuxt.com/docs/4.x/api/utils/on-nuxt-ready)
- [prefetchComponents](https://nuxt.com/docs/4.x/api/utils/prefetch-components)
- [preloadComponents](https://nuxt.com/docs/4.x/api/utils/preload-components)
- [preloadRouteComponents](https://nuxt.com/docs/4.x/api/utils/preload-route-components)
- [prerenderRoutes](https://nuxt.com/docs/4.x/api/utils/prerender-routes)
- [refreshCookie](https://nuxt.com/docs/4.x/api/utils/refresh-cookie)
- [refreshNuxtData](https://nuxt.com/docs/4.x/api/utils/refresh-nuxt-data)
- [reloadNuxtApp](https://nuxt.com/docs/4.x/api/utils/reload-nuxt-app)
- [setPageLayout](https://nuxt.com/docs/4.x/api/utils/set-page-layout)
- [setResponseStatus](https://nuxt.com/docs/4.x/api/utils/set-response-status)
- [showError](https://nuxt.com/docs/4.x/api/utils/show-error)
- [updateAppConfig](https://nuxt.com/docs/4.x/api/utils/update-app-config)

- Commands


- [nuxt add](https://nuxt.com/docs/4.x/api/commands/add)
- [nuxt analyze](https://nuxt.com/docs/4.x/api/commands/analyze)
- [nuxt build](https://nuxt.com/docs/4.x/api/commands/build)
- [nuxt build-module](https://nuxt.com/docs/4.x/api/commands/build-module)
- [nuxt cleanup](https://nuxt.com/docs/4.x/api/commands/cleanup)
- [nuxt dev](https://nuxt.com/docs/4.x/api/commands/dev)
- [nuxt devtools](https://nuxt.com/docs/4.x/api/commands/devtools)
- [nuxt generate](https://nuxt.com/docs/4.x/api/commands/generate)
- [nuxt info](https://nuxt.com/docs/4.x/api/commands/info)
- [create nuxt](https://nuxt.com/docs/4.x/api/commands/init)
- [nuxt module](https://nuxt.com/docs/4.x/api/commands/module)
- [nuxt prepare](https://nuxt.com/docs/4.x/api/commands/prepare)
- [nuxt preview](https://nuxt.com/docs/4.x/api/commands/preview)
- [nuxt test](https://nuxt.com/docs/4.x/api/commands/test)
- [nuxt typecheck](https://nuxt.com/docs/4.x/api/commands/typecheck)
- [nuxt upgrade](https://nuxt.com/docs/4.x/api/commands/upgrade)

- Nuxt Kit


- [Modules](https://nuxt.com/docs/4.x/api/kit/modules)
- [Runtime Config](https://nuxt.com/docs/4.x/api/kit/runtime-config)
- [Templates](https://nuxt.com/docs/4.x/api/kit/templates)
- [Nitro](https://nuxt.com/docs/4.x/api/kit/nitro)
- [Resolving](https://nuxt.com/docs/4.x/api/kit/resolving)
- [Logging](https://nuxt.com/docs/4.x/api/kit/logging)
- [Builder](https://nuxt.com/docs/4.x/api/kit/builder)
- [Examples](https://nuxt.com/docs/4.x/api/kit/examples)
- [Layers](https://nuxt.com/docs/4.x/api/kit/layers)
- [Programmatic Usage](https://nuxt.com/docs/4.x/api/kit/programmatic)
- [Compatibility](https://nuxt.com/docs/4.x/api/kit/compatibility)
- [Auto-imports](https://nuxt.com/docs/4.x/api/kit/autoimports)
- [Components](https://nuxt.com/docs/4.x/api/kit/components)
- [Context](https://nuxt.com/docs/4.x/api/kit/context)
- [Pages](https://nuxt.com/docs/4.x/api/kit/pages)
- [Layout](https://nuxt.com/docs/4.x/api/kit/layout)
- [Head](https://nuxt.com/docs/4.x/api/kit/head)
- [Plugins](https://nuxt.com/docs/4.x/api/kit/plugins)

- Advanced


- [Lifecycle Hooks](https://nuxt.com/docs/4.x/api/advanced/hooks)
- [Import meta](https://nuxt.com/docs/4.x/api/advanced/import-meta)

- [Nuxt Configuration](https://nuxt.com/docs/4.x/api/nuxt-config)

1. [API](https://nuxt.com/docs/4.x/api)
3. [Nuxt Kit](https://nuxt.com/docs/4.x/api/kit)

# Plugins

[Source](https://github.com/nuxt/nuxt/blob/main/packages/kit/src/plugin.ts)

Copy page

Nuxt Kit provides a set of utilities to help you create and use plugins. You can add plugins or plugin templates to your module using these functions.

Plugins are self-contained code that usually add app-level functionality to Vue. In Nuxt, plugins are automatically imported from the `app/plugins/` directory. However, if you need to ship a plugin with your module, Nuxt Kit provides the `addPlugin` and `addPluginTemplate` methods. These utils allow you to customize the plugin configuration to better suit your needs.

## [`addPlugin`](https://nuxt.com/docs/4.x/api/kit/plugins\#addplugin)

Registers a Nuxt plugin and adds it to the plugins array.

Watch Vue School video about `addPlugin`.

### [Usage](https://nuxt.com/docs/4.x/api/kit/plugins\#usage)

```ts
import { addPlugin, createResolver, defineNuxtModule } from '@nuxt/kit'

export default defineNuxtModule({
  setup () {
    const { resolve } = createResolver(import.meta.url)

    addPlugin({
      src: resolve('runtime/plugin.js'),
      mode: 'client',
    })
  },
})
```

### [Type](https://nuxt.com/docs/4.x/api/kit/plugins\#type)

```ts
function addPlugin (plugin: NuxtPlugin | string, options?: AddPluginOptions): NuxtPlugin
```

### [Parameters](https://nuxt.com/docs/4.x/api/kit/plugins\#parameters)

**`plugin`**: A plugin object or a string with the path to the plugin. If a string is provided, it will be converted to a plugin object with `src` set to the string value.

If a plugin object is provided, it must have the following properties:

| Property | Type | Required | Description |
| --- | --- | --- | --- |
| `src` | `string` | `true` | Path to the plugin file. |
| `mode` | `'all' | 'server' | 'client'` | `false` | If set to `'all'`, the plugin will be included in both client and server bundles. If set to `'server'`, the plugin will only be included in the server bundle. If set to `'client'`, the plugin will only be included in the client bundle. You can also use `.client` and `.server` modifiers when specifying `src` option to use plugin only in client or server side. |
| `order` | `number` | `false` | Order of the plugin. This allows more granular control over plugin order and should only be used by advanced users. Lower numbers run first, and user plugins default to `0`. It's recommended to set `order` to a number between `-20` for `pre`-plugins (plugins that run before Nuxt plugins) and `20` for `post`-plugins (plugins that run after Nuxt plugins). |

Avoid using `order` unless necessary. Use `append` if you simply need to register plugins after Nuxt defaults.

**`options`**: Optional object with the following properties:

| Property | Type | Required | Description |
| --- | --- | --- | --- |
| `append` | `boolean` | `false` | If `true`, the plugin will be appended to the plugins array. If `false`, it will be prepended. Defaults to `false`. |

### [Examples](https://nuxt.com/docs/4.x/api/kit/plugins\#examples)

module.tsruntime/plugin.ts

```ts
import { addPlugin, createResolver, defineNuxtModule } from '@nuxt/kit'

export default defineNuxtModule({
  setup () {
    const { resolve } = createResolver(import.meta.url)

    addPlugin({
      src: resolve('runtime/plugin.js'),
      mode: 'client',
    })
  },
})
```

```ts
export default defineNuxtPlugin((nuxtApp) => {
  const colorMode = useColorMode()

  nuxtApp.hook('app:mounted', () => {
    if (colorMode.preference !== 'dark') {
      colorMode.preference = 'dark'
    }
  })
})
```

## [`addPluginTemplate`](https://nuxt.com/docs/4.x/api/kit/plugins\#addplugintemplate)

Adds a template and registers as a nuxt plugin. This is useful for plugins that need to generate code at build time.

Watch Vue School video about `addPluginTemplate`.

### [Usage](https://nuxt.com/docs/4.x/api/kit/plugins\#usage-1)

```ts
import { addPluginTemplate, defineNuxtModule } from '@nuxt/kit'

export default defineNuxtModule({
  setup (options) {
    addPluginTemplate({
      filename: 'module-plugin.mjs',
      getContents: () => `import { defineNuxtPlugin } from '#app/nuxt'
export default defineNuxtPlugin({
  name: 'module-plugin',
  setup (nuxtApp) {
    ${options.log ? 'console.log("Plugin install")' : ''}
  }
})`,
    })
  },
})
```

### [Type](https://nuxt.com/docs/4.x/api/kit/plugins\#type-1)

```ts
function addPluginTemplate (pluginOptions: NuxtPluginTemplate, options?: AddPluginOptions): NuxtPlugin
```

### [Parameters](https://nuxt.com/docs/4.x/api/kit/plugins\#parameters-1)

**`pluginOptions`**: A plugin template object with the following properties:

| Property | Type | Required | Description |
| --- | --- | --- | --- |
| `src` | `string` | `false` | Path to the template. If `src` is not provided, `getContents` must be provided instead. |
| `filename` | `string` | `false` | Filename of the template. If `filename` is not provided, it will be generated from the `src` path. In this case, the `src` option is required. |
| `dst` | `string` | `false` | Path to the destination file. If `dst` is not provided, it will be generated from the `filename` path and nuxt `buildDir` option. |
| `mode` | `'all' | 'server' | 'client'` | `false` | If set to `'all'`, the plugin will be included in both client and server bundles. If set to `'server'`, the plugin will only be included in the server bundle. If set to `'client'`, the plugin will only be included in the client bundle. You can also use `.client` and `.server` modifiers when specifying `src` option to use plugin only in client or server side. |
| `options` | `Record<string, any>` | `false` | Options to pass to the template. |
| `getContents` | `(data: Record<string, any>) => string | Promise<string>` | `false` | A function that will be called with the `options` object. It should return a string or a promise that resolves to a string. If `src` is provided, this function will be ignored. |
| `write` | `boolean` | `false` | If set to `true`, the template will be written to the destination file. Otherwise, the template will be used only in virtual filesystem. |
| `order` | `number` | `false` | Order of the plugin. This allows more granular control over plugin order and should only be used by advanced users. Lower numbers run first, and user plugins default to `0`. It's recommended to set `order` to a number between `-20` for `pre`-plugins (plugins that run before Nuxt plugins) and `20` for `post`-plugins (plugins that run after Nuxt plugins). |

Prefer using `getContents` for dynamic plugin generation. Avoid setting `order` unless necessary.

**`options`**: Optional object with the following properties:

| Property | Type | Required | Description |
| --- | --- | --- | --- |
| `append` | `boolean` | `false` | If `true`, the plugin will be appended to the plugins array. If `false`, it will be prepended. Defaults to `false`. |

### [Examples](https://nuxt.com/docs/4.x/api/kit/plugins\#examples-1)

#### [Generate a plugin template with different options](https://nuxt.com/docs/4.x/api/kit/plugins\#generate-a-plugin-template-with-different-options)

Use `addPluginTemplate` when you need to generate plugin code dynamically at build time. This allows you to generate different plugin contents based on the options passed to it. For example, Nuxt internally uses this function to generate Vue app configurations.

module.ts

```ts
import { addPluginTemplate, defineNuxtModule } from '@nuxt/kit'

export default defineNuxtModule({
  setup (_, nuxt) {
    if (nuxt.options.vue.config && Object.values(nuxt.options.vue.config).some(v => v !== null && v !== undefined)) {
      addPluginTemplate({
        filename: 'vue-app-config.mjs',
        write: true,
        getContents: () => `import { defineNuxtPlugin } from '#app/nuxt'
export default defineNuxtPlugin({
  name: 'nuxt:vue-app-config',
  enforce: 'pre',
  setup (nuxtApp) {
    ${Object.keys(nuxt.options.vue.config!)
        .map(k => `nuxtApp.vueApp.config[${JSON.stringify(k)}] = ${JSON.stringify(nuxt.options.vue.config![k as 'idPrefix'])}`)
        .join('\n')
    }
  }
})`,
      })
    }
  },
})
```

This generates different plugin code depending on the provided configuration.

nuxt.config.ts#build/vue-app-config.mjs

```ts
export default defineNuxtConfig({
  vue: {
    config: {
      idPrefix: 'nuxt',
    },
  },
})
```

```ts
import { defineNuxtPlugin } from '#app/nuxt'

export default defineNuxtPlugin({
  name: 'nuxt:vue-app-config',
  enforce: 'pre',
  setup (nuxtApp) {
    nuxtApp.vueApp.config.idPrefix = 'nuxt'
  },
})
```

Was this helpful?

ü§©üôÇ‚òπÔ∏èüò∞

[Report an issue](https://github.com/nuxt/nuxt/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt/nuxt/edit/main/docs/4.api/5.kit/9.plugins.md)

[Head\\
\\
Nuxt Kit provides utilities to help you manage head configuration in modules.](https://nuxt.com/docs/4.x/api/kit/head) [Lifecycle Hooks\\
\\
Nuxt provides a powerful hooking system to expand almost every aspect using hooks.](https://nuxt.com/docs/4.x/api/advanced/hooks)

On this page

On this page

- [addPlugin](https://nuxt.com/docs/4.x/api/kit/plugins#addplugin)
  - [Usage](https://nuxt.com/docs/4.x/api/kit/plugins#usage)
  - [Type](https://nuxt.com/docs/4.x/api/kit/plugins#type)
  - [Parameters](https://nuxt.com/docs/4.x/api/kit/plugins#parameters)
  - [Examples](https://nuxt.com/docs/4.x/api/kit/plugins#examples)
- [addPluginTemplate](https://nuxt.com/docs/4.x/api/kit/plugins#addplugintemplate)
  - [Usage](https://nuxt.com/docs/4.x/api/kit/plugins#usage-1)
  - [Type](https://nuxt.com/docs/4.x/api/kit/plugins#type-1)
  - [Parameters](https://nuxt.com/docs/4.x/api/kit/plugins#parameters-1)
  - [Examples](https://nuxt.com/docs/4.x/api/kit/plugins#examples-1)

Community

- [Become a Sponsor](https://go.nuxt.com/sponsor)
- [Master Nuxt](https://masteringnuxt.com/nuxt3)
- [Nuxt Certification](https://certification.nuxt.com/)

[Nuxt on Discord](https://go.nuxt.com/discord) [Nuxt on Bluesky](https://go.nuxt.com/bluesky) [Nuxt on X](https://go.nuxt.com/x) [Nuxt on GitHub](https://go.nuxt.com/github)

Black Friday Week

Get 60% off and bonuses on all Official Nuxt Certifications.

MenuOn this page

### Community

- [Nuxters](https://nuxters.nuxt.com/)
- [Team](https://nuxt.com/team)
- [Design Kit](https://nuxt.com/design-kit)

### Explore

- [Modules](https://nuxt.com/modules)
- [Templates](https://nuxt.com/templates)
- [Showcase](https://nuxt.com/showcase)

### Enterprise

- [Support](https://nuxt.com/enterprise/support)
- [Agencies](https://nuxt.com/enterprise/agencies)
- [Sponsors](https://nuxt.com/enterprise/sponsors)

Subscribe to our newsletter

Stay updated on new releases and features, guides, and community updates.

Subscribe

[Nuxt on X](https://go.nuxt.com/x) [Nuxt on BlueSky](https://go.nuxt.com/bluesky) [Nuxt on LinkedIn](https://go.nuxt.com/linkedin) [Nuxt on Discord](https://go.nuxt.com/discord) [Nuxt on GitHub](https://go.nuxt.com/github)

Copyright ¬© 2016-2025 Nuxt - [MIT License](https://go.nuxt.com/license)